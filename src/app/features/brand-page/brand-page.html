<app-header></app-header>
<section class="bg-background text-text-primary">
  <!-- ✅ GROUPED BRAND VERSION (EMPTY STRUCTURE FOR NOW) -->
  @if (mode === 'group') {
    <!-- GROUP HERO -->
    <div class="mx-auto w-full pt-6">
      <div class="relative overflow-hidden bg-secondary shadow-soft">
        <img
          [src]="brandHeroUrl"
          [alt]="brand?.name ?? 'Brand hero'"
          class="w-full h-[180px] sm:h-[240px] md:h-[320px] lg:h-[360px] object-cover object-center"
          loading="lazy"
        />
      </div>
    </div>

    <div class="mx-auto w-full max-w-[1440px] px-4 sm:px-6 lg:px-10">
      <!-- BRAND HEADER -->
      <div class="pt-12 sm:pt-14 lg:pt-16 flex flex-col items-center gap-8 sm:gap-10">
        <p class="text-center text-text-primary text-sm sm:text-base font-semibold uppercase tracking-wide-luxury animate-fade-in-up">
          About this Brand
        </p>

        <!-- logo -->
        <div class="w-[240px] sm:w-[280px] h-[110px] sm:h-[130px] lg:w-[320px] lg:h-[150px] flex items-center justify-center animate-scale-in delay-100">
          <img
            *ngIf="brand?.logoUrl; else fallbackLogoGroup"
            [src]="brand!.logoUrl"
            [alt]="brand?.name ?? 'Brand logo'"
            class="max-w-full max-h-full object-contain"
            loading="lazy"
          />
          <ng-template #fallbackLogoGroup>
            <div class="w-full h-full rounded-xl bg-primary"></div>
          </ng-template>
        </div>

        <p class="max-w-2xl text-center text-text-secondary text-sm sm:text-base leading-6 tracking-tight px-2 animate-fade-in-up delay-200">
          {{ brand?.description }}
        </p>
      </div>

      <!-- COLLECTIONS GRID -->
      <div class="pt-12 sm:pt-14 lg:pt-16 pb-16 animate-fade-in-up delay-300">
        <div class="px-1 mb-6">
          <span class="text-text-primary text-base sm:text-lg font-semibold tracking-[0.24em]">
            COLLECTIONS
          </span>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
          @for (entry of collectionEntries; track entry.handle) {
            <a
              [routerLink]="['/shop/brand', entry.handle]"
              class="group block rounded-2xl overflow-hidden bg-secondary shadow-soft hover:shadow-luxury transition-shadow duration-300"
            >
              <!-- collection image -->
              <div class="relative w-full aspect-[4/3] bg-background overflow-hidden">
                <img
                  *ngIf="entry.imageUrl; else collectionPlaceholder"
                  [src]="entry.imageUrl"
                  [alt]="entry.title"
                  class="absolute inset-0 w-full h-full object-cover object-center transition-transform duration-500 group-hover:scale-[1.03]"
                  loading="lazy"
                />
                <ng-template #collectionPlaceholder>
                  <div class="absolute inset-0 bg-primary/10 flex items-center justify-center">
                    <span class="text-text-muted text-sm">{{ entry.title }}</span>
                  </div>
                </ng-template>
                <div class="pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/5"></div>
              </div>

              <!-- label -->
              <div class="px-6 py-5 flex items-center justify-between">
                <p class="text-text-primary text-sm sm:text-base font-semibold tracking-[0.18em] uppercase">
                  {{ entry.title }}
                </p>
                <svg
                  class="w-4 h-4 text-text-muted group-hover:text-text-primary transition-colors duration-300 shrink-0 ml-3"
                  fill="none" stroke="currentColor" stroke-width="2"
                  viewBox="0 0 24 24"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
                </svg>
              </div>
            </a>
          }
        </div>
      </div>
    </div>
  } @else {
    <!-- ✅ SINGLE COLLECTION VERSION (YOUR CURRENT HTML) -->

    <!-- HERO (image only; header already exists) -->
    <div class="mx-auto w-full pt-6">
      <div class="relative overflow-hidden bg-secondary shadow-soft">
        <img
          [src]="brandHeroUrl"
          [alt]="brand?.name ?? 'Brand hero'"
          class="w-full h-[180px] sm:h-[240px] md:h-[320px] lg:h-[360px] object-cover object-center"
          loading="lazy"
        />
      </div>
    </div>

    <!-- CONTENT -->
    <div class="mx-auto w-full max-w-[1440px] px-4 sm:px-6 lg:px-10">
      <!-- ABOUT THIS BRAND (top) -->
      <div class="pt-12 sm:pt-14 lg:pt-16 flex flex-col items-center gap-8 sm:gap-10">
        <p
          class="text-center text-text-primary text-sm sm:text-base font-semibold uppercase tracking-wide-luxury animate-fade-in-up"
        >
          About this Brand
        </p>

        <!-- logo -->
        <div
          class="w-[240px] sm:w-[280px] h-[110px] sm:h-[130px] lg:w-[320px] lg:h-[150px] flex items-center justify-center animate-scale-in delay-100"
        >
          <img
            *ngIf="brand?.logoUrl; else fallbackLogo"
            [src]="brand!.logoUrl"
            [alt]="brand?.name ?? 'Brand logo'"
            class="max-w-full max-h-full object-contain"
            loading="lazy"
          />
          <ng-template #fallbackLogo>
            <div class="w-full h-full rounded-xl bg-primary"></div>
          </ng-template>
        </div>

        <p
          class="max-w-2xl text-center text-text-secondary text-sm sm:text-base leading-6 tracking-tight px-2 animate-fade-in-up delay-200"
        >
          {{ brand?.description }}
        </p>
      </div>

      <!-- SHOP + FILTERS -->
      <div class="pt-12 sm:pt-14 lg:pt-16 animate-fade-in-up delay-300">
        <div class="flex flex-col gap-4">
          <div class="px-1">
            <span class="text-text-primary text-base sm:text-lg font-semibold tracking-[0.24em]">
              SHOP
            </span>
          </div>

          <div class="flex flex-wrap gap-3 sm:gap-4">
            @for (c of categories; track c.key) {
              <button
                type="button"
                (click)="selectCategory(c.key)"
                class="px-5 py-3 sm:py-4 outline outline-2 outline-offset-[-2px] outline-primary text-xs sm:text-sm md:text-base font-semibold tracking-[0.22em] transition-all duration-300 hover:bg-primary hover:text-white"
                [class.bg-primary]="selectedCategory === c.key"
                [class.text-white]="selectedCategory === c.key"
                [class.bg-transparent]="selectedCategory !== c.key"
                [class.text-text-primary]="selectedCategory !== c.key"
              >
                {{ c.label }}
              </button>
            }
          </div>
        </div>
      </div>

      <!-- PRODUCTS GRID -->
      <div class="pt-10 sm:pt-12 pb-12">
        <ng-container *ngIf="loading; else productsContent">
          <div class="py-10 text-center text-text-secondary">Loading…</div>
        </ng-container>

        <ng-template #productsContent>
          <div
            class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-8 sm:gap-x-6 sm:gap-y-10"
          >
            @for (p of visibleProducts; track p.id) {
              <a class="group block" [routerLink]="['/product', p.id]">
                <div
                  class="bg-secondary rounded-xl overflow-hidden shadow-soft transition-shadow duration-300 hover:shadow-luxury"
                >
                  <div class="relative w-full aspect-[3/4] bg-background overflow-hidden">
                    <img
                      [src]="p.imageUrl"
                      [alt]="p.title"
                      class="absolute inset-0 w-full h-full object-contain p-6 transition-transform duration-500 group-hover:scale-[1.03]"
                      loading="lazy"
                    />

                    <div
                      class="pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 bg-black/5"
                    ></div>
                  </div>
                </div>

                <div class="pt-4">
                  <p class="text-text-muted text-xs sm:text-sm leading-5">
                    {{ brand?.name ?? p.vendor }}
                  </p>
                  <p class="text-text-primary text-sm sm:text-base leading-6">
                    {{ p.title }}
                  </p>
                  <p class="text-text-primary text-sm sm:text-base font-bold leading-6">
                    {{ p.price }}
                  </p>
                </div>
              </a>
            }
          </div>

          <!-- SEE MORE -->
          <div class="pt-12 flex justify-center">
            <button
              type="button"
              *ngIf="canLoadMore"
              (click)="loadMore()"
              class="px-6 py-2.5 rounded-xl outline outline-1 outline-offset-[-1px] outline-primary text-text-primary text-sm sm:text-base font-medium transition-all duration-300 hover:bg-primary hover:text-white"
            >
              See More
            </button>
          </div>
        </ng-template>
      </div>

      <!-- DIVIDER -->
      <div class="border-t border-border"></div>

      <!-- ABOUT THIS BRAND (bottom) + WHY WE LOVE -->
      <div class="py-14 sm:py-16 lg:py-20">
        <p
          class="text-center text-text-primary text-sm sm:text-base font-semibold uppercase tracking-wide-luxury mb-8 sm:mb-10 animate-fade-in-up"
        >
          About this Brand
        </p>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-10 items-center">
          <!-- big image -->
          <div class="lg:col-span-7 animate-fade-in-left">
            <div class="overflow-hidden rounded-2xl bg-secondary shadow-soft">
              <img
                [src]="brandAboutImageUrl"
                [alt]="brand?.name ?? 'Brand image'"
                class="w-full h-[320px] sm:h-[420px] lg:h-[560px] object-cover object-center"
                loading="lazy"
              />
            </div>
          </div>

          <!-- why we love card -->
          <div class="lg:col-span-5 animate-fade-in-right">
            <div
              class="bg-secondary rounded-2xl p-8 sm:p-10 shadow-soft hover:shadow-luxury transition-shadow duration-300"
            >
              <h3
                class="text-text-primary text-2xl sm:text-3xl font-normal tracking-wider leading-10"
                style="font-family: 'Playfair Display', ui-serif, Georgia, serif"
              >
                Why We Love
              </h3>

              <div
                class="mt-8 w-[220px] sm:w-[260px] h-[90px] sm:h-[120px] flex items-center justify-start"
              >
                <img
                  *ngIf="brand?.logoUrl; else fallbackLogo2"
                  [src]="brand!.logoUrl"
                  [alt]="brand?.name ?? 'Brand logo'"
                  class="max-w-full max-h-full object-contain"
                  loading="lazy"
                />
                <ng-template #fallbackLogo2>
                  <div class="w-full h-full rounded-xl bg-primary"></div>
                </ng-template>
              </div>

              <p
                class="mt-8 text-text-secondary text-sm sm:text-base leading-6 tracking-tight whitespace-pre-line"
              >
                {{ whyWeLoveText }}
              </p>

              <div class="mt-10">
                <img
                  *ngIf="signatureUrl"
                  [src]="signatureUrl"
                  alt="Signature"
                  class="w-28 sm:w-32 h-auto object-contain"
                  loading="lazy"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  }
</section>
<app-footer></app-footer>